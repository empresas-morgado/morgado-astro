---
import { getCollection, getEntry } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";

const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<style>
    section {
        background: #f3f3f3;
    }

    .container {
        padding: 4rem 1rem;
        max-width: 1216px;
        margin: 0 auto;
    }

    h2 {
        margin-bottom: 2rem;
    }

    .numero-1 {
        display: none;
    }

    .numero-2 {
        display: none;
    }

    ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
    }

    .noticia {
        background-color: #fff;
    }

    .info-noticia {
        padding: 1rem;
    }

    h4 {
        font-size: 1rem;
        font-family: "Inter", sans-serif;
        font-weight: 500;
        line-height: 1.5;
    }

    a.descubre {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding: 2rem 0;
        gap: 1rem;

        color: #505050;
        text-decoration: none;
        text-align: right;
    }

    @media only screen and (min-width: 600px) {
        .numero-1 {
            display: block;
        }
    }
    @media only screen and (min-width: 900px) {
        .numero-2 {
            display: block;
        }
    }
</style>

<section>
    <div class="container">
        <div class="noticias">
            <h2>Noticias y comunicados</h2>
        </div>

        <div class="lista-de-noticias">
            <ul>
                {
                    posts.slice(0, 3).map((post, index) => (
                        <li class={"noticia numero-" + index.toString()}>
                            <a href={`/blog/${post.slug}/`}>
                                <img
                                    width={720}
                                    height={360}
                                    src={post.data.heroImage}
                                    alt={post.data.title}
                                />
                                <div class="info-noticia">
                                    <h4 class="title">{post.data.title}</h4>
                                    <p class="date">
                                        <FormattedDate
                                            date={post.data.pubDate}
                                        />
                                    </p>
                                </div>
                            </a>
                        </li>
                    ))
                }
            </ul>
        </div>

        <a href="/blog/" class="descubre">
            <p>Ver todas las noticias y comunicados</p>
            <svg
                width="48"
                height="48"
                viewBox="0 0 48 48"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <circle cx="24" cy="24" r="24" fill="#222973"></circle>
                <path
                    d="M15.75 24L32.25 24"
                    stroke="white"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
                <path
                    d="M25.5 17.25L32.25 24L25.5 30.75"
                    stroke="white"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
            </svg>
        </a>
    </div>
</section>
